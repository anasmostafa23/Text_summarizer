<h2>Balance: {{ balance }}</h2>
<a href="/recharge">Recharge balance</a>
<a href="/submit_task">New task</a>

<h2>Summarization History</h2>
<table>
    <tr>
        <th>Task ID</th>
        <th>Prompt</th>
        <th>Result</th>
    </tr>
    {% for task in tasks %}
    <tr>
        <td>{{ task.id }}</td>
        <td>{{ task.prompt }}</td>
        <td>{{ task.result }}</td>
    </tr>
    {% endfor %}
</table>

<h2>Balance History</h2>
<table>
    <tr>
        <th>Transaction ID</th>
        <th>Amount</th>
        <th>Type</th>
        <th>Date</th>
    </tr>
    {% for transaction in transactions %}
    <tr>
        <td>{{ transaction.id }}</td>
        <td>{{ transaction.amount }}</td>
        <td>{{ transaction.transaction_type }}</td>
        <td>{{ transaction.timestamp.strftime('%Y-%m-%d %H:%M:%S %Z') }}</td>
    </tr>
    {% endfor %}
</table>
<br>
<form id="clear-history-form" method="POST" action="{{ url_for('main_page.clear_history') }}">
    <button type="button" onclick="confirmClearHistory()">Clear History</button>
</form>
<!-- JavaScript to show confirmation dialog -->
<script>
    function confirmClearHistory() {
        var confirmation = confirm("Are you sure you want to clear your history? This action cannot be undone.");
        if (confirmation) {
            // If the user confirms, submit the form
            document.getElementById("clear-history-form").submit();
        }
    }
</script>
<br>
<a href="/logout">Log out</a>


